# 异常

## 运行期错误及处理策略

### 运行期错误
**运行期 (run-time)** 错误是指程序在运行时可能会遇到的非正常或非预想的状态。
这种错误往往由 **运行期** 所获得或产生的非法参数所导致，因此无法在 **编译期 (compile-time)** 被发现和排除。

对于简单的错误，通常可以在本地进行 **处理 (handle)**。
而对于下面这种更复杂、更一般的场景，就需要引入专门的 **错误处理策略 (error-handling strategy)**：
- **作者** 知道哪里会发生运行期错误，但不知道该如何去处理这种错误。
- **用户** 知道该如何处理运行期错误，但不知道这种错误会在哪里发生。

⚠️ 对于新系统，应当确定错误处理策略；对于现有系统，应当与现有的错误处理策略保持一致。

### 传统处理策略
在[异常机制](#异常机制)被引入 C++ 之前，业界已经形成了一些常用的错误处理策略。
这些策略可以看作是[异常机制](#异常机制)的替代项，但都带有各自的缺点。

#### 中止程序
调用 `exit()` 或 `abort()` 来中止（整个）程序。

主要缺点：用户可能无法承受系统崩溃所造成的影响。

#### 返回错误码
返回一个表示错误信息的整数（或枚举值）。

主要缺点：用户可能忘记检测错误码。

#### 设置状态变量
返回一个合法值，将某个用于记录状态的变量设为错误状态。

主要缺点：用户可能忘记检测状态变量。

#### 调用处理函数
调用处理函数的抽象接口，由用户提供具体实现。

主要缺点：系统行为依赖于用户提供的具体实现。

