---
title: Cache Lab
---

# Part A: Writing a Cache Simulator

# Part B: Optimizing Matrix Transpose

## $32\times32$

```c
void trans_32x32(int M, int N, int A[M][N], int B[M][N]);
/*
  &A[0][0] == 0x10c0a0
  &A[i][j] == 0x10c0a0 + i * 32 * 4 + j * 4
           == 0x10c0a0 + i * 0x80 + j * 0x4
  &B[0][0] == 0x14c0a0
 */
```

|   Set ID   | `0 <= col < 8` | `8 <= col < 16` | `16 <= col < 24` | `24 <= col < 32` |
| :--------: | :------------: | :-------------: | :--------------: | :--------------: |
| `row == 0` |      `05`      |      `06`       |       `07`       |       `08`       |
| `row == 1` |      `09`      |      `10`       |       `11`       |       `12`       |
| `row == 2` |      `13`      |      `14`       |       `15`       |       `16`       |
| `row == 3` |      `17`      |      `18`       |       `19`       |       `20`       |
| `row == 4` |      `21`      |      `22`       |       `23`       |       `24`       |
| `row == 5` |      `25`      |      `26`       |       `27`       |       `28`       |
| `row == 6` |      `29`      |      `30`       |       `31`       |       `00`       |
| `row == 7` |      `01`      |      `02`       |       `03`       |       `04`       |
| `row == 8` |      `05`      |      `06`       |       `07`       |       `08`       |
|   `...`    |     `...`      |      `...`      |      `...`       |      `...`       |

## $64\times64$

## $61\times67$

